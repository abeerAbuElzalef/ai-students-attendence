{
  "buildCommand": "cd frontend && npm install && npm run build && mkdir -p ../public && cp -r dist/* ../public/",
  "outputDirectory": "public",
  "installCommand": "cd api && npm install",
  "functions": {
    "api/*.js": {
      "memory": 1024,
      "maxDuration": 30
    }
  },
  "rewrites": [
    { "source": "/api/auth/register", "destination": "/api/auth?action=register" },
    { "source": "/api/auth/login", "destination": "/api/auth?action=login" },
    { "source": "/api/auth/me", "destination": "/api/auth?action=me" },
    { "source": "/api/classes/:id", "destination": "/api/classes?id=:id" },
    { "source": "/api/classes", "destination": "/api/classes" },
    { "source": "/api/students/import", "destination": "/api/students?action=import" },
    { "source": "/api/students/:id", "destination": "/api/students?id=:id" },
    { "source": "/api/students", "destination": "/api/students" },
    { "source": "/api/attendance", "destination": "/api/attendance" },
    { "source": "/api/calendar/:year/:month", "destination": "/api/calendar?year=:year&month=:month" },
    { "source": "/api/holidays/:year/:month", "destination": "/api/holidays?year=:year&month=:month" },
    { "source": "/api/export/monthly", "destination": "/api/export" },
    { "source": "/api/admin/dashboard", "destination": "/api/admin?resource=dashboard" },
    { "source": "/api/admin/teachers/:id", "destination": "/api/admin?resource=teachers&id=:id" },
    { "source": "/api/admin/teachers", "destination": "/api/admin?resource=teachers" },
    { "source": "/api/admin/classes/:id", "destination": "/api/admin?resource=classes&id=:id" },
    { "source": "/api/admin/classes", "destination": "/api/admin?resource=classes" }
  ]
}
