{
  "buildCommand": "cd frontend && npm install && npm run build && mkdir -p ../public && cp -r dist/* ../public/",
  "outputDirectory": "public",
  "installCommand": "cd api && npm install",
  "functions": {
    "api/*.js": {
      "memory": 1024,
      "maxDuration": 10
    }
  },
  "rewrites": [
    { "source": "/api/auth/:path*", "destination": "/api/auth" },
    { "source": "/api/classes/:path*", "destination": "/api/classes" },
    { "source": "/api/classes", "destination": "/api/classes" },
    { "source": "/api/students/import", "destination": "/api/students" },
    { "source": "/api/students/:path*", "destination": "/api/students" },
    { "source": "/api/students", "destination": "/api/students" },
    { "source": "/api/attendance", "destination": "/api/attendance" },
    { "source": "/api/calendar/:year/:month", "destination": "/api/calendar" },
    { "source": "/api/holidays/:year/:month", "destination": "/api/holidays" },
    { "source": "/api/export/monthly", "destination": "/api/export" },
    { "source": "/api/admin/:path*", "destination": "/api/admin" },
    { "source": "/api/admin", "destination": "/api/admin" }
  ]
}
